<html>
<head>
</head>
<body>
<h1>this is a test to window control</h1>
<button onclick="WinObj.max()">max</button>
<button onclick="WinObj.min()">min</button>
<button onclick="WinObj.restore()">restore</button>
<button onclick="WinObj.close()">close</button>
<button onclick="WinObj.full()">full</button>
<button onclick="WinObj.topMost(true)">topMost</button>
<button onclick="WinObj.topMost(false)">NoTopMost</button>
<button onclick="WinObj.frame(0)">frame-full</button>
<button onclick="WinObj.frame(1)">frame-thin</button>
<button onclick="WinObj.frame(2)">frame-less</button>
<button onclick="WinObj.frame(3)">frame-full-top</button>
<button onmousedown="dragOn(event)" onmouseup="dragOff()">drag</button>
<a href="http://news.163.com">163</a>
<a href="http://html5test.com">test</a>
<script>
    //this part also in ext.js
    var WinObj;WinObj||(WinObj={});(function(){
        WinObj.wss="ws://127.0.0.1:65530/win";
        WinObj.WinWS = new WebSocket(WinObj.wss);
        WinObj.WinWS.onopen=function(){WinObj.frame(1);}
        WinObj.close=function(){WinObj.WinWS.send("win:close")};
        WinObj.full=function(){WinObj.WinWS.send("win:full")};
        WinObj.topMost=function(a){WinObj.WinWS.send("win:topMost:"+a)};
        WinObj.max=function(){WinObj.WinWS.send("win:max")};
        WinObj.min=function(){WinObj.WinWS.send("win:min")};
        WinObj.restore=function(){WinObj.WinWS.send("win:restore")};
        WinObj.frame=function(a){WinObj.WinWS.send("win:frame:"+a)};
        WinObj.drag=function(a,e){a?WinObj.WinWS.send("win:drag:start|"+e.x+"|"+e.y):WinObj.WinWS.send("win:drag:stop")};
        WinObj.onMouseMove=function(a){eve=window.event||ev;eve.button===0?WinObj.WinWS.send("win:drag:move|"+eve.screenX+"|"+eve.screenY):''}})();
    function dragOn (e) {
        console.log(e)
        WinObj.drag(true, e)
        document.addEventListener('mousemove', WinObj.onMouseMove, true)
    }
    function dragOff () {
        WinObj.drag(false)
        document.removeEventListener('mousemove', WinObj.onMouseMove, true)
    }
</script>
</body>
</html>
